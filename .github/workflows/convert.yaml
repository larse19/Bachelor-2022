on:
  pull_request:
    branches:
      - "main"
    # paths:
    #   - "testdocs/**"

jobs:
  push_to_confluence:
    runs-on: ubuntu-latest
    name: Converting Markdown to Confluence
    steps:
      # To use this repository's private action,
      # you must check out the repository
      - name: Checkout
        uses: actions/checkout@v3
      - run: printenv
      - run: sudo apt-get update && sudo apt-get install jq git
      - run: jq .before ${GITHUB_EVENT_PATH}
      - run: |
          before=$(jq .before ${GITHUB_EVENT_PATH} | tr -d '"')
          after=${GITHUB_SHA} | tr -d '"'
          git fetch origin ${before} --depth=1
          echo ${after}
      # - name: Conversion step
      #   uses: TTengs/MarkdownToConfluence@v2.2.3
      #   id: convert
      #   with:
      #     fileslocation: 'testdocs'
      #     should_upload: false
      #     confluence_url: 'https://at-bachelor.atlassian.net'
      #     confluence_space_key: 'BP'
      #     auth_username: ${{ secrets.AUTH_USERNAME }}
      #     auth_api_token: ${{ secrets.AUTH_API_TOKEN }}